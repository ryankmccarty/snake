import"vite/modulepreload-polyfill";import{jsx as e,jsxs as a}from"react/jsx-runtime";import*as S from"react";import te,{useState as f,useCallback as p,useEffect as H}from"react";import re from"react-dom/client";import{Slot as ae}from"@radix-ui/react-slot@1.1.2";import{cva as ne}from"class-variance-authority@0.7.1";import{clsx as oe}from"clsx";import{twMerge as ie}from"tailwind-merge";import*as v from"@radix-ui/react-dialog@1.1.6";import{XIcon as se}from"lucide-react@0.487.0";import*as le from"@radix-ui/react-label@2.1.2";function b(...r){return ie(oe(r))}const de=ne("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function h({className:r,variant:o,size:s,asChild:x=!1,...d}){return e(x?ae:"button",{"data-slot":"button",className:b(de({variant:o,size:s,className:r})),...d})}function ce({...r}){return e(v.Root,{"data-slot":"dialog",...r})}const ge=S.forwardRef(({...r},o)=>e(v.Trigger,{ref:o,"data-slot":"dialog-trigger",...r}));ge.displayName="DialogTrigger";function me({...r}){return e(v.Portal,{"data-slot":"dialog-portal",...r})}const F=S.forwardRef(({className:r,...o},s)=>e(v.Overlay,{ref:s,"data-slot":"dialog-overlay",className:b("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...o}));F.displayName="DialogOverlay";const j=S.forwardRef(({className:r,children:o,...s},x)=>a(me,{"data-slot":"dialog-portal",children:[e(F,{}),a(v.Content,{ref:x,"data-slot":"dialog-content",className:b("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...s,children:[o,a(v.Close,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e(se,{}),e("span",{className:"sr-only",children:"Close"})]})]})]}));j.displayName="DialogContent";function ue({className:r,...o}){return e("div",{"data-slot":"dialog-header",className:b("flex flex-col gap-2 text-center sm:text-left",r),...o})}const B=S.forwardRef(({className:r,...o},s)=>e(v.Title,{ref:s,"data-slot":"dialog-title",className:b("text-lg leading-none font-semibold",r),...o}));B.displayName="DialogTitle";const K=S.forwardRef(({className:r,...o},s)=>e(v.Description,{ref:s,"data-slot":"dialog-description",className:b("text-muted-foreground text-sm",r),...o}));K.displayName="DialogDescription";function fe({className:r,type:o,...s}){return e("input",{type:o,"data-slot":"input",className:b("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...s})}function pe({className:r,...o}){return e(le.Root,{"data-slot":"label",className:b("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...o})}const u=20,P=[{x:10,y:10}],M={x:15,y:15},G={x:0,y:-1},he=150,L=5;function ve(){const[r,o]=f(P),[s,x]=f(M),[d,c]=f(G),[l,N]=f("waiting"),[y,E]=f(0),[g,Y]=f(()=>{const t=localStorage.getItem("snake-high-scores");return t?JSON.parse(t):[]}),[U,k]=f(!1),[w,R]=f(""),[D,$]=f(0),J=g.length>0?g[0].score:0,O=p(t=>{localStorage.setItem("snake-high-scores",JSON.stringify(t))},[]),C=p(t=>t===0?!1:g.length<L||t>g[g.length-1].score?($(t),k(!0),!0):!1,[g]),V=p(()=>{if(w.trim()==="")return;const t={name:w.trim(),score:D,date:new Date().toLocaleDateString()},n=[...g,t].sort((i,m)=>m.score-i.score).slice(0,L);Y(n),O(n),k(!1),R("")},[w,D,g,O]),z=p(t=>{let n;do n={x:Math.floor(Math.random()*u),y:Math.floor(Math.random()*u)};while(t.some(i=>i.x===n.x&&i.y===n.y));return n},[]),X=p(()=>{o(P),x(M),c(G),E(0),N("waiting")},[]),W=p(()=>{N("playing")},[]),I=p(()=>{N(l==="paused"?"playing":"paused")},[l]),T=p(()=>{l==="playing"&&o(t=>{const n=[...t],i={...n[0]};if(i.x+=d.x,i.y+=d.y,i.x<0||i.x>=u||i.y<0||i.y>=u)return N("gameOver"),setTimeout(()=>C(y),100),t;if(n.some(m=>m.x===i.x&&m.y===i.y))return N("gameOver"),setTimeout(()=>C(y),100),t;if(n.unshift(i),i.x===s.x&&i.y===s.y){const m=y+10;E(m),x(z(n))}else n.pop();return n})},[d,s,l,z,y,C]),A=p(t=>{if(!(l==="gameOver"||l==="waiting"))switch(t.key){case"ArrowUp":t.preventDefault(),d.y===0&&c({x:0,y:-1});break;case"ArrowDown":t.preventDefault(),d.y===0&&c({x:0,y:1});break;case"ArrowLeft":t.preventDefault(),d.x===0&&c({x:-1,y:0});break;case"ArrowRight":t.preventDefault(),d.x===0&&c({x:1,y:0});break;case" ":t.preventDefault(),I();break}},[d,l,I]),Z=t=>{t.preventDefault(),V()};return H(()=>{const t=setInterval(T,he);return()=>clearInterval(t)},[T]),H(()=>(window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)),[A]),a("div",{className:"flex flex-col items-center p-4 bg-zinc-900 min-h-screen",children:[a("div",{className:"mb-4 text-center",children:[e("h1",{className:"text-2xl mb-2 text-green-400 font-mono",children:"PRIMACY SNAKE GAME"}),a("div",{className:"text-green-300 font-mono",children:[a("div",{children:["Score: ",y.toString().padStart(4,"0")]}),a("div",{children:["Best: ",J.toString().padStart(4,"0")]})]})]}),a("div",{className:"relative border-4 border-gray-600 bg-green-900 p-2",children:[e("div",{className:"grid gap-0 bg-green-800",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,gridTemplateRows:`repeat(${u}, 1fr)`,width:"400px",height:"400px"},children:Array.from({length:u*u}).map((t,n)=>{const i=n%u,m=Math.floor(n/u),q=r.some(_=>_.x===i&&_.y===m),Q=r[0]?.x===i&&r[0]?.y===m,ee=s.x===i&&s.y===m;return e("div",{className:`
                  border border-green-700/30 flex items-center justify-center
                  ${q?Q?"bg-green-300":"bg-green-400":""}
                `,style:{height:"20px",width:"20px"},children:ee&&e("span",{className:"text-sm leading-none",children:"🕐"})},n)})}),l!=="playing"&&e("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:a("div",{className:"text-center text-green-300 font-mono",children:[l==="waiting"&&a("div",{children:[e("div",{className:"mb-4",children:"Track your time in OB"}),e(h,{onClick:W,className:"mb-2 bg-green-600 hover:bg-green-500 text-green-100",children:"START GAME"}),e("div",{className:"text-sm",children:"Use arrow keys to play"})]}),l==="paused"&&a("div",{children:[e("div",{className:"mb-4",children:"PAUSED"}),e("div",{className:"text-sm",children:"Press SPACE to continue"})]}),l==="gameOver"&&a("div",{children:[e("div",{className:"mb-3 text-2xl",children:"☠️"}),e("div",{className:"mb-2",children:"You forgot to track your time!"}),a("div",{className:"mb-4",children:["Score: ",y]}),e(h,{onClick:X,className:"bg-green-600 hover:bg-green-500 text-green-100",children:"PLAY AGAIN"})]})]})})]}),a("div",{className:"mt-4 text-center text-green-300 font-mono text-sm",children:[e("div",{className:"mb-2",children:"Controls:"}),e("div",{children:"Arrow Keys: Move"}),e("div",{children:"Space: Pause/Resume"})]}),a("div",{className:"mt-4 grid grid-cols-3 gap-2 md:hidden",children:[e("div",{}),e(h,{variant:"outline",size:"sm",onClick:()=>c(t=>t.y===0?{x:0,y:-1}:t),disabled:l!=="playing",className:"border-green-500 text-green-400",children:"↑"}),e("div",{}),e(h,{variant:"outline",size:"sm",onClick:()=>c(t=>t.x===0?{x:-1,y:0}:t),disabled:l!=="playing",className:"border-green-500 text-green-400",children:"←"}),e(h,{variant:"outline",size:"sm",onClick:I,disabled:l==="waiting"||l==="gameOver",className:"border-green-500 text-green-400",children:"⏸"}),e(h,{variant:"outline",size:"sm",onClick:()=>c(t=>t.x===0?{x:1,y:0}:t),disabled:l!=="playing",className:"border-green-500 text-green-400",children:"→"}),e("div",{}),e(h,{variant:"outline",size:"sm",onClick:()=>c(t=>t.y===0?{x:0,y:1}:t),disabled:l!=="playing",className:"border-green-500 text-green-400",children:"↓"}),e("div",{})]}),g.length>0&&a("div",{className:"mt-8 w-full max-w-md",children:[e("div",{className:"text-center text-green-400 font-mono text-lg mb-4",children:"🏆 HIGH SCORES"}),e("div",{className:"bg-green-900/50 border-2 border-green-700 rounded p-4",children:g.map((t,n)=>a("div",{className:"flex justify-between items-center text-green-300 font-mono text-sm py-1",children:[a("span",{className:"flex items-center gap-2",children:[a("span",{className:"text-green-400",children:[n+1,"."]}),e("span",{className:"truncate max-w-32",children:t.name})]}),e("span",{children:t.score.toString().padStart(4,"0")})]},n))})]}),e(ce,{open:U,onOpenChange:k,children:a(j,{className:"bg-zinc-800 border-green-500",children:[a(ue,{children:[e(B,{className:"text-green-400 font-mono",children:"🎉 NEW HIGH SCORE!"}),a(K,{className:"text-green-300 font-mono",children:["You scored ",D," points! Enter your name for the leaderboard."]})]}),a("form",{onSubmit:Z,className:"space-y-4",children:[a("div",{children:[e(pe,{htmlFor:"playerName",className:"text-green-300 font-mono",children:"Player Name"}),e(fe,{id:"playerName",value:w,onChange:t=>R(t.target.value),placeholder:"Enter your name",maxLength:15,className:"bg-green-900/50 border-green-600 text-green-200 placeholder:text-green-500 font-mono mt-1",autoFocus:!0})]}),a("div",{className:"flex gap-2 justify-end",children:[e(h,{type:"button",variant:"outline",onClick:()=>k(!1),className:"border-green-600 text-green-300 hover:bg-green-800",children:"Skip"}),e(h,{type:"submit",className:"bg-green-600 hover:bg-green-500 text-green-100",disabled:w.trim()==="",children:"Save Score"})]})]})]})})]})}function be(){return e(ve,{})}re.createRoot(document.getElementById("root")).render(e(te.StrictMode,{children:e(be,{})}));
